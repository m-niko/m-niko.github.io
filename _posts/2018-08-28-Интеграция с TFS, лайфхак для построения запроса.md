# Интеграция с TFS, лайфхак для построения Wiql запросов
Наконец у меня дошли руки до автоматизации одного внутреннего процесса в компании, который не отнимал много времени, но доставлял неудобства. Суть в следующем, после каждого спринта необходимо делать почтовую рассылку с выполненными задачами. Так как мы ведем всю нашу работу в Team Foundation Server (TFS) 2017, который имеет встроенный [REST API](https://docs.microsoft.com/en-us/rest/api/vsts/?view=vsts-rest-4.1), выбирать долого не пришлось. 

Изучив документацию, я решил написать маленькую утилиту, которая поможет мне избавиться от рутины. Пример кода я приводить не буду, он очень простой, за основу я взял вот [этот пример](https://docs.microsoft.com/en-us/vsts/integrate/quickstarts/work-item-quickstart?view=vsts). Основная проблема с которой я столкнулся - это построение запроса:
```Csharp
Wiql wiql = new Wiql()
        {
            Query = "Select [State], [Title] ...."
        };
``` 
Писать самому желания не было, да и времени очень мало, я решил поискать альтернативный путь. Кто ищет, тот найдет, в самом TFS есть раздел, в котором, используя графический редактор, можно строить те самые запросы:

![Query builder](/img/posts/qBuilder.png)

Создав запрос, необходимо открыть в браузере Dev Tools, а затем нажать Run query в интерфейсе. В консоли разработчика, на вкладке Network (браузер Chrome), появится нужный нам запрос, в котором можно найти то что нам надо.

![Query dev tools](/img/posts/qDevTools.png)

Копируем текст запроса из поля wiql, вставляем в наш код и вуаля, часть задачи решена. И не забудьте заменить переменные в запросе, которые начинаются с символа **@**, на свои данные, иначе получите ошибку во время выполения. На этом все, good luck.
